<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Donnelly Adventures - California 2026</title>
  <meta name="description" content="The Donnelly Family California Adventure - January 23 - February 4, 2026">
  <meta name="theme-color" content="#0d2818">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap" rel="stylesheet">
  <!-- Cloudinary Upload Widget -->
  <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --green-dark: #0d2818;
      --green-medium: #1a3d2a;
      --green-light: #adebb3;
      --gold: #efbf04;
      --white: #e0e0e0;
      --gray: #888;
    }

    html { scroll-behavior: smooth; }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--green-dark);
      color: var(--white);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Animated Background */
    .bg-stars {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
      background:
        radial-gradient(ellipse at 20% 20%, rgba(173,235,179,0.08) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 80%, rgba(239,191,4,0.06) 0%, transparent 50%),
        linear-gradient(135deg, #0d2818 0%, #1a3d2a 50%, #0d2818 100%);
    }

    .star {
      position: absolute;
      width: 3px;
      height: 3px;
      background: var(--gold);
      border-radius: 50%;
      animation: twinkle 3s ease-in-out infinite;
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.2; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.5); }
    }

    /* Hero Section */
    .hero {
      position: relative;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 20px;
      overflow: hidden;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('https://images.unsplash.com/photo-1597466599360-3b9775841aec?w=1600&q=80') center/cover;
      opacity: 0.15;
      z-index: 0;
    }

    .hero-content {
      position: relative;
      z-index: 1;
    }

    .back-btn {
      position: fixed;
      top: 20px;
      left: 20px;
      background: rgba(239,191,4,0.9);
      color: var(--green-dark);
      padding: 12px 24px;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 700;
      font-size: 14px;
      z-index: 1000;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      transition: all 0.3s;
    }

    .back-btn:hover {
      background: var(--gold);
      transform: scale(1.05);
    }

    .hero-badge {
      display: inline-block;
      padding: 8px 20px;
      background: rgba(239,191,4,0.2);
      border: 2px solid var(--gold);
      border-radius: 50px;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 3px;
      color: var(--gold);
      margin-bottom: 20px;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(239,191,4,0.4); }
      50% { box-shadow: 0 0 0 15px rgba(239,191,4,0); }
    }

    .hero h1 {
      font-size: clamp(40px, 10vw, 80px);
      font-weight: 900;
      line-height: 1.1;
      background: linear-gradient(135deg, var(--green-light), var(--gold), var(--green-light));
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: shimmer 3s ease-in-out infinite;
      text-shadow: 0 0 60px rgba(173,235,179,0.3);
    }

    @keyframes shimmer {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .hero .subtitle {
      font-size: clamp(16px, 4vw, 24px);
      color: var(--green-light);
      margin-top: 10px;
      font-weight: 500;
    }

    .hero .dates {
      font-size: clamp(20px, 5vw, 32px);
      color: var(--gold);
      font-weight: 700;
      margin-top: 15px;
      text-shadow: 0 0 30px rgba(239,191,4,0.5);
    }

    /* Countdown */
    .countdown {
      display: flex;
      justify-content: center;
      gap: clamp(15px, 5vw, 40px);
      margin-top: 40px;
      padding: 30px;
      background: rgba(0,0,0,0.4);
      border-radius: 20px;
      border: 2px solid rgba(239,191,4,0.3);
      backdrop-filter: blur(10px);
    }

    .countdown-item {
      text-align: center;
    }

    .countdown-number {
      font-size: clamp(40px, 12vw, 72px);
      font-weight: 900;
      color: var(--gold);
      text-shadow: 0 0 40px rgba(239,191,4,0.6);
      line-height: 1;
    }

    .countdown-label {
      font-size: clamp(10px, 3vw, 14px);
      color: var(--green-light);
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-top: 5px;
    }

    .scroll-indicator {
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      animation: bounce 2s ease-in-out infinite;
      color: var(--gold);
      font-size: 30px;
    }

    @keyframes bounce {
      0%, 100% { transform: translateX(-50%) translateY(0); }
      50% { transform: translateX(-50%) translateY(15px); }
    }

    /* Stats Bar */
    .stats-bar {
      display: flex;
      justify-content: space-around;
      background: linear-gradient(90deg, rgba(239,191,4,0.15), rgba(173,235,179,0.1), rgba(239,191,4,0.15));
      padding: 30px 20px;
      border-top: 2px solid var(--gold);
      border-bottom: 2px solid var(--gold);
      position: relative;
      z-index: 1;
    }

    .stat {
      text-align: center;
    }

    .stat-num {
      font-size: clamp(32px, 8vw, 56px);
      font-weight: 900;
      color: var(--gold);
      text-shadow: 0 0 20px rgba(239,191,4,0.4);
    }

    .stat-label {
      font-size: clamp(10px, 3vw, 14px);
      color: var(--green-light);
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    /* Section Styles */
    section {
      position: relative;
      z-index: 1;
      padding: 60px 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .section-title {
      font-size: clamp(24px, 6vw, 36px);
      color: var(--green-light);
      margin-bottom: 30px;
      display: flex;
      align-items: center;
      gap: 15px;
      border-left: 5px solid var(--gold);
      padding-left: 20px;
      text-shadow: 0 0 20px rgba(173,235,179,0.3);
    }

    /* Destination Cards */
    .destination {
      background: rgba(173,235,179,0.05);
      border-radius: 24px;
      overflow: hidden;
      margin-bottom: 40px;
      border: 2px solid rgba(173,235,179,0.3);
      box-shadow: 0 10px 40px rgba(0,0,0,0.3), 0 0 60px rgba(173,235,179,0.05);
      transition: all 0.4s;
    }

    .destination:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 60px rgba(0,0,0,0.4), 0 0 80px rgba(173,235,179,0.1);
      border-color: var(--gold);
    }

    .destination-header {
      padding: 25px 30px;
      background: linear-gradient(135deg, rgba(173,235,179,0.2), rgba(239,191,4,0.1));
      border-bottom: 2px solid rgba(239,191,4,0.3);
    }

    .destination-header h3 {
      font-size: clamp(20px, 5vw, 28px);
      color: var(--green-light);
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 10px;
    }

    .badge {
      display: inline-block;
      padding: 5px 14px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .badge-booked {
      background: rgba(173,235,179,0.3);
      color: var(--green-light);
      border: 1px solid var(--green-light);
      box-shadow: 0 0 15px rgba(173,235,179,0.3);
    }

    .badge-fire {
      background: rgba(239,191,4,0.3);
      color: var(--gold);
      border: 1px solid var(--gold);
      box-shadow: 0 0 15px rgba(239,191,4,0.3);
      animation: glow 2s ease-in-out infinite;
    }

    @keyframes glow {
      0%, 100% { box-shadow: 0 0 15px rgba(239,191,4,0.3); }
      50% { box-shadow: 0 0 25px rgba(239,191,4,0.6); }
    }

    .destination-dates {
      color: var(--gold);
      font-size: 15px;
      margin-top: 8px;
      font-weight: 500;
    }

    .photo-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 4px;
    }

    .photo-grid img {
      width: 100%;
      height: clamp(150px, 20vw, 280px);
      object-fit: cover;
      object-position: center;
      transition: all 0.4s;
      cursor: pointer;
    }

    .photo-grid img:hover {
      transform: scale(1.03);
      filter: brightness(1.1);
    }

    .destination-content {
      padding: 25px 30px;
    }

    .destination-content p {
      color: #aaa;
      font-size: 15px;
      line-height: 1.7;
    }

    .destination-content strong {
      color: var(--white);
    }

    .destination-content .highlight {
      color: var(--gold);
      font-weight: 600;
    }

    /* Visual Calendar */
    .visual-calendar {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      padding: 30px;
      background: rgba(0,0,0,0.3);
      border-radius: 20px;
      border: 2px solid rgba(173,235,179,0.2);
    }

    .cal-day {
      width: clamp(55px, 12vw, 75px);
      padding: 12px 8px;
      border-radius: 16px;
      text-align: center;
      transition: all 0.3s;
      cursor: pointer;
    }

    .cal-day:hover {
      transform: scale(1.15) rotate(5deg);
      box-shadow: 0 10px 30px rgba(0,0,0,0.4);
    }

    .cal-day.today {
      animation: todayPulse 2s ease-in-out infinite;
    }

    @keyframes todayPulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(239,191,4,0.6); }
      50% { box-shadow: 0 0 0 10px rgba(239,191,4,0); }
    }

    .cal-icon { font-size: clamp(24px, 6vw, 36px); margin-bottom: 5px; }
    .cal-date { font-size: clamp(10px, 2.5vw, 12px); font-weight: 700; color: #fff; }
    .cal-label { font-size: clamp(8px, 2vw, 10px); color: rgba(255,255,255,0.7); text-transform: uppercase; }

    .cal-day.sacramento { background: linear-gradient(135deg, #4a2600, #3d1f00); border: 2px solid #e67e22; }
    .cal-day.hockey { background: linear-gradient(135deg, #1a1a2e, #16213e); border: 2px solid #4a90a4; }
    .cal-day.disney { background: linear-gradient(135deg, #2d1f3d, #1a1a2e); border: 2px solid #9b59b6; }
    .cal-day.wolf { background: linear-gradient(135deg, #1e3a5f, #16213e); border: 2px solid #3498db; }
    .cal-day.redding { background: linear-gradient(135deg, #1d4a1d, #0d2818); border: 2px solid #27ae60; }
    .cal-day.home { background: linear-gradient(135deg, #3d2a00, #2d1f00); border: 2px solid var(--gold); }

    .cal-legend {
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
      margin-top: 20px;
      font-size: 13px;
      color: #aaa;
    }

    .cal-legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .legend-dot {
      width: 14px;
      height: 14px;
      border-radius: 4px;
    }

    .sacramento-dot { background: #e67e22; }
    .hockey-dot { background: #4a90a4; }
    .disney-dot { background: #9b59b6; }
    .wolf-dot { background: #3498db; }
    .redding-dot { background: #27ae60; }

    /* Highlights */
    .highlights {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
    }

    .highlight-item {
      background: rgba(173,235,179,0.08);
      border-radius: 16px;
      padding: 20px;
      display: flex;
      align-items: center;
      gap: 15px;
      border: 1px solid rgba(173,235,179,0.2);
      transition: all 0.3s;
    }

    .highlight-item:hover {
      background: rgba(239,191,4,0.15);
      border-color: var(--gold);
      transform: translateX(10px);
      box-shadow: 0 5px 20px rgba(239,191,4,0.2);
    }

    .highlight-item .emoji { font-size: 32px; }
    .highlight-item .text { color: var(--white); font-size: 15px; }

    /* Budget Section */
    .budget-section {
      background: linear-gradient(135deg, rgba(173,235,179,0.1), rgba(239,191,4,0.08));
      border-radius: 24px;
      padding: 40px;
      border: 2px solid rgba(239,191,4,0.4);
      box-shadow: 0 0 60px rgba(239,191,4,0.1);
    }

    .budget-total {
      font-size: clamp(40px, 10vw, 64px);
      color: var(--gold);
      font-weight: 900;
      text-align: center;
      margin-top: 30px;
      text-shadow: 0 0 40px rgba(239,191,4,0.5);
    }

    .budget-total small {
      font-size: clamp(14px, 4vw, 20px);
      color: var(--green-light);
      display: block;
      margin-top: 10px;
    }

    /* Progress Bar */
    .progress-bar {
      background: rgba(0,0,0,0.4);
      border-radius: 15px;
      height: 30px;
      margin: 30px 0;
      overflow: hidden;
      border: 2px solid rgba(173,235,179,0.3);
    }

    .progress-fill {
      background: linear-gradient(90deg, var(--green-light), var(--gold), var(--green-light));
      background-size: 200% 100%;
      height: 100%;
      border-radius: 12px;
      animation: progressShimmer 2s linear infinite;
      box-shadow: 0 0 20px rgba(173,235,179,0.5);
    }

    @keyframes progressShimmer {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    .progress-label {
      text-align: center;
      color: var(--gold);
      font-size: 16px;
      font-weight: 600;
    }

    /* Table */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      border-radius: 12px;
      overflow: hidden;
      border: 2px solid rgba(173,235,179,0.3);
    }

    th {
      background: linear-gradient(90deg, var(--green-light), #7dd98a);
      color: var(--green-dark);
      padding: 16px 20px;
      text-align: left;
      font-weight: 700;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    td {
      padding: 14px 20px;
      border-bottom: 1px solid rgba(173,235,179,0.15);
      color: var(--white);
      font-size: 14px;
    }

    tr:nth-child(even) td { background: rgba(173,235,179,0.05); }
    tr:hover td { background: rgba(173,235,179,0.1); }

    .booked { color: var(--green-light); font-weight: 700; }

    /* Interactive Features */
    .floating-actions {
      position: fixed;
      bottom: 30px;
      right: 30px;
      display: flex;
      flex-direction: column;
      gap: 15px;
      z-index: 1000;
    }

    .fab {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: none;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 5px 25px rgba(0,0,0,0.4);
      transition: all 0.3s;
    }

    .fab:hover {
      transform: scale(1.15);
    }

    .fab-photo {
      background: linear-gradient(135deg, var(--gold), #f5d000);
      color: var(--green-dark);
    }

    .fab-journal {
      background: linear-gradient(135deg, var(--green-light), #7dd98a);
      color: var(--green-dark);
    }

    /* Modal */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.9);
      backdrop-filter: blur(10px);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      padding: 20px;
    }

    .modal.active { display: flex; }

    .modal-content {
      background: linear-gradient(135deg, var(--green-dark), var(--green-medium));
      border: 2px solid var(--green-light);
      border-radius: 24px;
      padding: 30px;
      width: 100%;
      max-width: 500px;
      max-height: 85vh;
      overflow-y: auto;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5), 0 0 100px rgba(173,235,179,0.1);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
    }

    .modal-header h2 {
      color: var(--green-light);
      font-size: 24px;
    }

    .modal-close {
      background: none;
      border: none;
      color: var(--gray);
      font-size: 32px;
      cursor: pointer;
      transition: color 0.3s;
    }

    .modal-close:hover { color: var(--gold); }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      color: var(--green-light);
      font-size: 13px;
      margin-bottom: 8px;
      font-weight: 600;
    }

    .form-group input, .form-group textarea, .form-group select {
      width: 100%;
      padding: 14px;
      background: rgba(0,0,0,0.3);
      border: 2px solid rgba(173,235,179,0.3);
      border-radius: 12px;
      color: var(--white);
      font-family: inherit;
      font-size: 15px;
      transition: border-color 0.3s;
    }

    .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
      outline: none;
      border-color: var(--gold);
    }

    .form-group textarea {
      min-height: 120px;
      resize: vertical;
    }

    .file-input-wrapper {
      position: relative;
      background: rgba(239,191,4,0.1);
      border: 3px dashed var(--gold);
      border-radius: 16px;
      padding: 40px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
    }

    .file-input-wrapper:hover {
      background: rgba(239,191,4,0.2);
      border-style: solid;
    }

    .file-input-wrapper input {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      cursor: pointer;
    }

    .file-input-wrapper .icon { font-size: 48px; }
    .file-input-wrapper p { color: var(--gold); margin-top: 15px; font-weight: 600; }

    .btn {
      width: 100%;
      padding: 16px;
      background: linear-gradient(135deg, var(--gold), #f5d000);
      border: none;
      border-radius: 12px;
      color: var(--green-dark);
      font-weight: 700;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .btn:hover { transform: scale(1.02); box-shadow: 0 10px 30px rgba(239,191,4,0.4); }
    .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

    /* Journal Display */
    .journal-entries {
      margin-top: 30px;
    }

    .journal-entry {
      background: rgba(173,235,179,0.08);
      border: 1px solid rgba(173,235,179,0.2);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 15px;
      transition: all 0.3s;
    }

    .journal-entry:hover {
      border-color: var(--gold);
      transform: translateX(5px);
    }

    .journal-entry .author {
      color: var(--gold);
      font-weight: 700;
      font-size: 16px;
    }

    .journal-entry .date {
      color: var(--gray);
      font-size: 12px;
      margin-left: 10px;
    }

    .journal-entry .content {
      color: var(--white);
      font-size: 15px;
      margin-top: 10px;
      line-height: 1.6;
    }

    /* Gallery Section */
    .gallery-section {
      margin-top: 30px;
    }

    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 10px;
    }

    .gallery-item {
      border-radius: 12px;
      overflow: hidden;
      transition: all 0.3s;
      background: rgba(0,0,0,0.3);
    }

    .gallery-item:hover {
      transform: scale(1.02);
      box-shadow: 0 10px 30px rgba(0,0,0,0.4);
    }

    .gallery-item .photo-wrapper {
      aspect-ratio: 1;
      cursor: pointer;
      overflow: hidden;
    }

    .gallery-item img, .gallery-item video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center center;
    }

    .gallery-item .photo-info {
      padding: 10px 12px;
      background: rgba(0,0,0,0.5);
    }

    .gallery-item .photo-caption {
      color: var(--white);
      font-size: 13px;
      line-height: 1.4;
      margin-bottom: 6px;
    }

    .gallery-item .photo-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 11px;
      color: var(--gray);
    }

    .gallery-item .photo-author {
      color: var(--gold);
      font-weight: 600;
    }

    .gallery-item .delete-btn {
      background: rgba(255,68,68,0.8);
      border: none;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 10px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .gallery-item .delete-btn:hover {
      background: #ff4444;
      transform: scale(1.1);
    }

    /* Lightbox */
    .lightbox {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.95);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 3000;
    }

    .lightbox.active { display: flex; }

    .lightbox img, .lightbox video {
      max-width: 95%;
      max-height: 90vh;
      object-fit: contain;
      border-radius: 8px;
    }

    .lightbox-close {
      position: absolute;
      top: 20px;
      right: 30px;
      background: none;
      border: none;
      color: white;
      font-size: 40px;
      cursor: pointer;
    }

    .lightbox-caption {
      position: absolute;
      bottom: 30px;
      left: 0;
      right: 0;
      text-align: center;
      color: white;
      font-size: 16px;
      padding: 0 20px;
    }

    /* Toast */
    .toast {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--green-light);
      color: var(--green-dark);
      padding: 15px 30px;
      border-radius: 30px;
      font-weight: 700;
      font-size: 15px;
      z-index: 4000;
      opacity: 0;
      transition: opacity 0.3s;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }

    .toast.show { opacity: 1; }

    /* Footer */
    .footer {
      text-align: center;
      padding: 60px 20px;
      background: linear-gradient(0deg, rgba(173,235,179,0.1), transparent);
      border-top: 3px solid rgba(239,191,4,0.5);
      position: relative;
      z-index: 1;
    }

    .footer .love {
      font-size: 60px;
      margin-bottom: 20px;
      animation: heartbeat 1.5s ease-in-out infinite;
    }

    @keyframes heartbeat {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }

    .footer .trip-message {
      font-size: clamp(18px, 5vw, 28px);
      color: var(--gold);
      font-weight: 700;
      margin-bottom: 15px;
      text-shadow: 0 0 30px rgba(239,191,4,0.5);
    }

    .footer .sub-message {
      font-size: clamp(14px, 4vw, 20px);
      color: var(--green-light);
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--gray);
    }

    .empty-state .icon { font-size: 64px; margin-bottom: 20px; }
    .empty-state p { font-size: 16px; }

    /* Caption Items in batch modal */
    .caption-item {
      display: flex;
      gap: 15px;
      align-items: flex-start;
      padding: 15px;
      background: rgba(0,0,0,0.3);
      border-radius: 12px;
      margin-bottom: 12px;
      border: 1px solid rgba(173,235,179,0.2);
    }

    .caption-item img {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 8px;
      flex-shrink: 0;
    }

    .caption-item .caption-input-wrapper {
      flex: 1;
    }

    .caption-item input {
      width: 100%;
      padding: 12px;
      background: rgba(0,0,0,0.4);
      border: 2px solid rgba(173,235,179,0.3);
      border-radius: 8px;
      color: var(--white);
      font-family: inherit;
      font-size: 14px;
    }

    .caption-item input:focus {
      outline: none;
      border-color: var(--gold);
    }

    /* Edit button on gallery items */
    .gallery-item .photo-actions {
      display: flex;
      gap: 6px;
    }

    .gallery-item .edit-btn {
      background: rgba(239,191,4,0.8);
      border: none;
      color: var(--green-dark);
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 10px;
      cursor: pointer;
      transition: all 0.2s;
      font-weight: 600;
    }

    .gallery-item .edit-btn:hover {
      background: var(--gold);
      transform: scale(1.1);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .photo-grid { grid-template-columns: 1fr; }
      .photo-grid img { height: 200px; }
      .gallery-grid { grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); }
      .gallery-item { aspect-ratio: 3/4; }
      .floating-actions { bottom: 20px; right: 20px; }
      .fab { width: 50px; height: 50px; font-size: 20px; }
    }
  </style>
</head>
<body>
  <a href="/" class="back-btn">‚Üê Back to Adventures</a>

  <!-- Animated Background -->
  <div class="bg-stars" id="stars"></div>

  <!-- Hero Section -->
  <div class="hero">
    <div class="hero-content">
      <div class="hero-badge">The Ultimate Family Road Trip</div>
      <h1>California<br>Adventure 2026</h1>
      <div class="subtitle">The Donnelly Family</div>
      <div class="dates">January 22 - February 4</div>

      <div class="countdown">
        <div class="countdown-item">
          <div class="countdown-number" id="days">--</div>
          <div class="countdown-label">Days</div>
        </div>
        <div class="countdown-item">
          <div class="countdown-number" id="hours">--</div>
          <div class="countdown-label">Hours</div>
        </div>
        <div class="countdown-item">
          <div class="countdown-number" id="minutes">--</div>
          <div class="countdown-label">Minutes</div>
        </div>
        <div class="countdown-item">
          <div class="countdown-number" id="seconds">--</div>
          <div class="countdown-label">Seconds</div>
        </div>
      </div>
    </div>
    <div class="scroll-indicator">‚Üì</div>
  </div>

  <!-- Stats Bar -->
  <div class="stats-bar">
    <div class="stat">
      <div class="stat-num">14</div>
      <div class="stat-label">Days</div>
    </div>
    <div class="stat">
      <div class="stat-num">13</div>
      <div class="stat-label">Nights</div>
    </div>
    <div class="stat">
      <div class="stat-num">6</div>
      <div class="stat-label">Destinations</div>
    </div>
    <div class="stat">
      <div class="stat-num">2,050</div>
      <div class="stat-label">Miles</div>
    </div>
  </div>

  <!-- Route Overview -->
  <section style="padding-top: 40px; padding-bottom: 20px;">
    <div style="background: rgba(239,191,4,0.1); border: 2px solid rgba(239,191,4,0.3); border-radius: 16px; padding: 25px; text-align: center;">
      <h3 style="color: var(--gold); margin-bottom: 15px; font-size: 18px;">üöó The Route from Sherwood, OR</h3>
      <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; font-size: 14px;">
        <span style="background: rgba(0,0,0,0.3); padding: 8px 15px; border-radius: 20px; color: var(--white);">Sherwood ‚Üí Sacramento <strong style="color: var(--gold);">530 mi</strong></span>
        <span style="color: var(--gold);">‚Üí</span>
        <span style="background: rgba(0,0,0,0.3); padding: 8px 15px; border-radius: 20px; color: var(--white);">Jelly Belly <strong style="color: var(--gold);">55 mi</strong></span>
        <span style="color: var(--gold);">‚Üí</span>
        <span style="background: rgba(0,0,0,0.3); padding: 8px 15px; border-radius: 20px; color: var(--white);">San Jose <strong style="color: var(--gold);">60 mi</strong></span>
        <span style="color: var(--gold);">‚Üí</span>
        <span style="background: rgba(0,0,0,0.3); padding: 8px 15px; border-radius: 20px; color: var(--white);">Anaheim <strong style="color: var(--gold);">366 mi</strong></span>
        <span style="color: var(--gold);">‚Üí</span>
        <span style="background: rgba(0,0,0,0.3); padding: 8px 15px; border-radius: 20px; color: var(--white);">Great Wolf <strong style="color: var(--gold);">3 mi</strong></span>
        <span style="color: var(--gold);">‚Üí</span>
        <span style="background: rgba(0,0,0,0.3); padding: 8px 15px; border-radius: 20px; color: var(--white);">Redding <strong style="color: var(--gold);">573 mi</strong></span>
        <span style="color: var(--gold);">‚Üí</span>
        <span style="background: rgba(0,0,0,0.3); padding: 8px 15px; border-radius: 20px; color: var(--white);">Home! <strong style="color: var(--gold);">410 mi</strong></span>
      </div>
    </div>
  </section>

  <!-- Where We're Staying -->
  <section>
    <h2 class="section-title">üè® Where We're Staying</h2>

    <!-- Sacramento -->
    <div class="destination">
      <div class="destination-header">
        <h3>ü¶Å Sacramento - Lion King Night </h3>
        <div class="destination-dates">Thursday, Jan 22 ‚Ä¢ 1 Night ‚Ä¢ 530 miles from Sherwood</div>
      </div>
      <div class="photo-grid">
        <img src="https://cdn.mytheatreland.com/images/show/03102_show_1279x840_03.jpg" alt="The Lion King Musical">
        <img src="https://cdn-tp1.mozu.com/9046-m1/cms/files/3cf7d9f5-917c-4866-bd95-38f06ce67586?max=1920" alt="Jelly Belly Factory">
      </div>
      <div class="destination-content">
        <p><span class="highlight">The Lion King @ SAFE Credit Union Performing Arts Center</span> - 7:30 PM<br>
        Orchestra Section DD-EE, Row FF, Seats 1-15 üé≠<br>
        <span class="highlight">Hotel:</span> Hyatt Regency Sacramento, 1209 L Street (check-in 4pm)<br>
        <span class="highlight">Friday Morning:</span> üç¨ <strong>Jelly Belly Factory Tour</strong> in Fairfield on the way to San Jose!</p>
      </div>
    </div>

    <!-- San Jose -->
    <div class="destination">
      <div class="destination-header">
        <h3>ü¶à San Jose - Sharks Game Night </h3>
        <div class="destination-dates">Friday, Jan 23 ‚Ä¢ 1 Night ‚Ä¢ 115 miles from Sacramento (via Jelly Belly)</div>
      </div>
      <div class="photo-grid">
        <img src="https://media.d3.nhle.com/image/private/t_ratio16_9-size40/dpr_2.0/f_png/v1732025093/prd/l8y3g90ap8awanthfuw3.png" alt="San Jose Sharks">
        <img src="https://media.video-cdn.espn.com/motion/2025/1023/e75096bbf0764d928b4b19a39a57aabf1298/e75096bbf0764d928b4b19a39a57aabf1298.jpg" alt="Sharks Hockey Game">
      </div>
      <div class="destination-content">
        <p><span class="highlight">Sharks vs Rangers @ SAP Center</span> - Section 127, Row 15, <strong>CLUB SEATS!</strong> üî•<br>
        Jelly Belly Factory Friday morning, then drive to San Jose for 7pm game. Club seats include premium amenities and incredible views of the ice.</p>
      </div>
    </div>

    <!-- Disneyland -->
    <div class="destination">
      <div class="destination-header">
        <h3>üè∞ Disneyland Hotel - 1 Bedroom Suite  <span class="badge badge-fire">üî• 7 NIGHTS</span></h3>
        <div class="destination-dates">Saturday, Jan 24 - Saturday, Jan 31 ‚Ä¢ 366 miles from San Jose</div>
      </div>
      <div class="photo-grid">
        <img src="https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/1600/900/75/dam/wdpro-assets/dlr/things-to-do/sports-and-recreation-centers/disneyland-hotel/pools-at-disneyland-hotel/pools-disneyland-hotel-04.jpg?1743792166313" alt="Disneyland Hotel Pool">
        <img src="https://playgroundhb.com/cdn/shop/files/Screenshot_2025-08-07_at_11.04.25_PM.png?v=1754633103&width=1600" alt="Arcade Fun">
      </div>
      <div class="photo-grid">
        <img src="https://www.disneytouristblog.com/wp-content/uploads/2025/05/wondrous-journeys-fireworks-disneyland-70th-anniversary-california-854.jpg" alt="Disney Fireworks">
        <img src="https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/1600/900/75/dam/wdpro-assets/parks-and-tickets/attractions/magic-kingdom/big-thunder-mountain-railroad/big-thunder-mountain-railroad-00.jpg?1765208789463" alt="Big Thunder Mountain">
      </div>
      <div class="destination-content">
        <p><span class="highlight">Schedule:</span><br>
        ‚Ä¢ <strong>Sat 1/24:</strong> Arrive & settle in<br>
        ‚Ä¢ <strong>Sun 1/25:</strong> Rest day / Pool<br>
        ‚Ä¢ <strong>Mon 1/26:</strong> üè∞ Park Day<br>
        ‚Ä¢ <strong>Tue 1/27:</strong> üèñÔ∏è Cabana Day<br>
        ‚Ä¢ <strong>Wed 1/28:</strong> üè∞ Disney Day with Steph<br>
        ‚Ä¢ <strong>Thu 1/29:</strong> üè† Steph's House<br>
        ‚Ä¢ <strong>Fri 1/30:</strong> üè∞ Park Day<br>
        ‚Ä¢ <strong>Sat 1/31:</strong> üè∞ Park Day ‚Üí Great Wolf<br><br>
        <span class="highlight">Must-Do:</span> Cars Land, Avengers Campus, World of Color, üéÜ <strong>Paint the Night Parade!</strong></p>
      </div>
    </div>

    <!-- Great Wolf Lodge -->
    <div class="destination">
      <div class="destination-header">
        <h3>üåä Great Wolf Lodge SoCal </h3>
        <div class="destination-dates">Saturday, Jan 31 - Monday, Feb 2 ‚Ä¢ 2 Nights ‚Ä¢ 3 miles from Disney</div>
      </div>
      <div class="photo-grid">
        <img src="https://www.momrewritten.com/wp-content/uploads/2025/11/Great-wolf-lodge-wave-pool-overview-728x546.jpg.webp" alt="Great Wolf Lodge Wave Pool">
        <img src="https://www.rci.com/static/Resorts/Assets/RP71E01L.jpg" alt="Great Wolf Lodge Waterpark">
      </div>
      <div class="photo-grid">
        <img src="https://californiathroughmylens.com/wp-content/uploads/2017/01/medieval-times-13.jpg" alt="Medieval Times">
        <img src="https://ewscripps.brightspotcdn.com/dims4/default/0cf666b/2147483647/strip/true/crop/3618x2035+0+188/resize/1280x720!/quality/90/?url=http%3A%2F%2Fewscripps-brightspot.s3.amazonaws.com%2F86%2F65%2Fee82cb744b06b5f0e3e4901f20d1%2Fap24110134853676.jpg" alt="Anaheim Ducks Hockey">
      </div>
      <div class="destination-content">
        <p><span class="highlight">Full waterpark access!</span> 105,000 sq ft indoor waterpark - slides, wave pool, lazy river, MagiQuest!<br>
        <span class="highlight">Saturday night:</span> ‚öîÔ∏è <strong>Medieval Times 7:30pm</strong> - Celebration Upgrade + Glow Sword!<br>
        <span class="highlight">Sunday 2/1:</span> üèí <strong>Anaheim Ducks @ Honda Center 6:30pm</strong> - Section 307, INSANE seats!</p>
      </div>
    </div>

    <!-- Sheraton Redding -->
    <div class="destination">
      <div class="destination-header">
        <h3>üè® Sheraton Redding - Presidential Suite  <span class="badge badge-fire">üî• PRESIDENTIAL</span></h3>
        <div class="destination-dates">Monday, Feb 2 - Wednesday, Feb 4 ‚Ä¢ 2 Nights ‚Ä¢ 573 miles from Great Wolf</div>
      </div>
      <div class="photo-grid">
        <img src="https://cache.marriott.com/content/dam/marriott-renditions/RDDSI/rddsi-exterior-2636-hor-wide.jpg?output-quality=70&interpolation=progressive-bilinear&downsize=750px:*" alt="Sheraton Redding Exterior">
        <img src="https://drupal-prod.visitcalifornia.com/sites/default/files/styles/fluid_1920/public/VCW_D_SC_T4-Sundial%20Bridge_i-8p9WWv_R-L.jpg_KG.jpg.webp?itok=ewh2xT0N" alt="Sundial Bridge">
      </div>
      <div class="photo-grid">
        <img src="https://images.squarespace-cdn.com/content/v1/591d131d17bffc24f111e867/1591037067920-FUSKLSXQBYX7CKC9KIHZ/1T0A0051.jpg" alt="Turtle Bay">
        <img src="https://krcrtv.com/resources/media2/16x9/3024/986/0x1166/90/85acdc73-4f19-4f05-84ff-e4662f147cb4-Image31.jpg" alt="Shasta Caverns">
      </div>
      <div class="destination-content">
        <p><span class="highlight">The nicest room in Redding!</span> 1,100 sq ft Presidential Suite with 3 showers, pool view balcony.<br>
        <span class="highlight">Club Lounge:</span> Wine, charcuterie, cookies at happy hour + full breakfast!<br>
        <span class="highlight">Adventures:</span> üåâ Sundial Bridge evening walk, üö§ Shasta Caverns 12pm Tue, üê¢ Turtle Bay 9am Wed<br>
        <span class="highlight">Home:</span> 410 miles back to Sherwood!</p>
      </div>
    </div>
  </section>

  <!-- Visual Calendar -->
  <section>
    <h2 class="section-title">üìÖ Our Adventure Calendar</h2>

    <div class="visual-calendar">
      <div class="cal-day sacramento"><div class="cal-icon">ü¶Å</div><div class="cal-date">Jan 22</div><div class="cal-label">Thu</div></div>
      <div class="cal-day hockey"><div class="cal-icon">üç¨</div><div class="cal-date">Jan 23</div><div class="cal-label">Fri</div></div>
      <div class="cal-day disney"><div class="cal-icon">üõ¨</div><div class="cal-date">Jan 24</div><div class="cal-label">Sat</div></div>
      <div class="cal-day disney"><div class="cal-icon">üèä</div><div class="cal-date">Jan 25</div><div class="cal-label">Sun</div></div>
      <div class="cal-day disney"><div class="cal-icon">üè∞</div><div class="cal-date">Jan 26</div><div class="cal-label">Mon</div></div>
      <div class="cal-day disney"><div class="cal-icon">üèñÔ∏è</div><div class="cal-date">Jan 27</div><div class="cal-label">Tue</div></div>
      <div class="cal-day disney"><div class="cal-icon">üè∞</div><div class="cal-date">Jan 28</div><div class="cal-label">Wed</div></div>
      <div class="cal-day disney"><div class="cal-icon">üè†</div><div class="cal-date">Jan 29</div><div class="cal-label">Thu</div></div>
      <div class="cal-day disney"><div class="cal-icon">üè∞</div><div class="cal-date">Jan 30</div><div class="cal-label">Fri</div></div>
      <div class="cal-day wolf"><div class="cal-icon">‚öîÔ∏è</div><div class="cal-date">Jan 31</div><div class="cal-label">Sat</div></div>
      <div class="cal-day wolf"><div class="cal-icon">üèí</div><div class="cal-date">Feb 1</div><div class="cal-label">Sun</div></div>
      <div class="cal-day redding"><div class="cal-icon">üåâ</div><div class="cal-date">Feb 2</div><div class="cal-label">Mon</div></div>
      <div class="cal-day redding"><div class="cal-icon">üö§</div><div class="cal-date">Feb 3</div><div class="cal-label">Tue</div></div>
      <div class="cal-day home"><div class="cal-icon">üè†</div><div class="cal-date">Feb 4</div><div class="cal-label">Wed</div></div>
    </div>

    <div class="cal-legend">
      <span class="cal-legend-item"><span class="legend-dot sacramento-dot"></span> Sacramento</span>
      <span class="cal-legend-item"><span class="legend-dot hockey-dot"></span> Hockey</span>
      <span class="cal-legend-item"><span class="legend-dot disney-dot"></span> Disney</span>
      <span class="cal-legend-item"><span class="legend-dot wolf-dot"></span> Great Wolf</span>
      <span class="cal-legend-item"><span class="legend-dot redding-dot"></span> Redding</span>
    </div>
  </section>

  <!-- Trip Highlights -->
  <section>
    <h2 class="section-title">‚ú® Trip Highlights</h2>

    <div class="highlights">
      <div class="highlight-item"><span class="emoji">ü¶Å</span><span class="text">The Lion King - Orchestra Seats!</span></div>
      <div class="highlight-item"><span class="emoji">üç¨</span><span class="text">Jelly Belly Factory Tour</span></div>
      <div class="highlight-item"><span class="emoji">ü¶à</span><span class="text">Sharks vs Rangers - CLUB SEATS!</span></div>
      <div class="highlight-item"><span class="emoji">üè∞</span><span class="text">7 Nights Disneyland Hotel 1BR Suite</span></div>
      <div class="highlight-item"><span class="emoji">üéÜ</span><span class="text">Paint the Night Parade</span></div>
      <div class="highlight-item"><span class="emoji">üèñÔ∏è</span><span class="text">Steph's Place - Huntington Beach</span></div>
      <div class="highlight-item"><span class="emoji">‚öîÔ∏è</span><span class="text">Medieval Times - Celebration + Glow Sword</span></div>
      <div class="highlight-item"><span class="emoji">üåä</span><span class="text">2 Nights Great Wolf Lodge</span></div>
      <div class="highlight-item"><span class="emoji">üèí</span><span class="text">Anaheim Ducks - Section 307!</span></div>
      <div class="highlight-item"><span class="emoji">üåâ</span><span class="text">Sundial Bridge</span></div>
      <div class="highlight-item"><span class="emoji">üö§</span><span class="text">Shasta Caverns (Boat + Cave)</span></div>
      <div class="highlight-item"><span class="emoji">üê¢</span><span class="text">Turtle Bay Exploration Park</span></div>
      <div class="highlight-item"><span class="emoji">üè®</span><span class="text">Sheraton Presidential Suite + Club üî•</span></div>
      <div class="highlight-item"><span class="emoji">‚ö°</span><span class="text">Lightning Lane - Skip the lines!</span></div>
    </div>
  </section>

  <!-- Family Memories -->
  <section>
    <h2 class="section-title">üì∏ Family Memories</h2>
    <p style="color: var(--gray); margin-bottom: 20px;">Upload photos and videos during the trip - everyone can contribute!</p>

    <div class="gallery-section">
      <div id="gallery-container" class="gallery-grid">
        <!-- Photos load here -->
      </div>
    </div>
  </section>

  <!-- Family Journal -->
  <section>
    <h2 class="section-title">üìù Family Journal</h2>
    <p style="color: var(--gray); margin-bottom: 20px;">Write memories, thoughts, and favorite moments throughout the trip!</p>

    <div id="journal-entries" class="journal-entries">
      <!-- Journal entries load here -->
    </div>
  </section>


  <!-- Footer -->
  <div class="footer">
    <div class="love">üíö</div>
    <div class="trip-message" id="footer-message">6 DAYS UNTIL THE ADVENTURE!</div>
    <div class="sub-message">This is going to be AMAZING!</div>
    <div style="color: var(--green-light); margin-top: 15px;">14 days of adventures together üíõ</div>
  </div>

  <!-- Floating Action Buttons -->
  <div class="floating-actions">
    <button class="fab fab-photo" onclick="openModal('upload')" title="Add Photo">üì∑</button>
    <button class="fab fab-journal" onclick="openModal('journal')" title="Write Entry">‚úèÔ∏è</button>
  </div>

  <!-- Upload Modal -->
  <div class="modal" id="modal-upload">
    <div class="modal-content">
      <div class="modal-header">
        <h2>üì∑ Add Memory</h2>
        <button class="modal-close" onclick="closeModal('upload')">&times;</button>
      </div>
      <div class="form-group">
        <label>Who's Uploading?</label>
        <select id="upload-name">
          <option value="">Select family member...</option>
          <option value="Brandon">Brandon</option>
          <option value="Racheal">Racheal</option>
          <option value="Olivia">Olivia</option>
        </select>
      </div>
      <div class="form-group">
        <label>Which Day?</label>
        <select id="upload-day">
          <option value="">Select a day...</option>
          <option value="1">Day 1 - Sacramento / Lion King</option>
          <option value="2">Day 2 - Jelly Belly / Sharks Game</option>
          <option value="3">Day 3 - Drive to Disney / Arrive</option>
          <option value="4">Day 4 - Rest / Pool Day</option>
          <option value="5">Day 5 - Disneyland</option>
          <option value="6">Day 6 - Cabana Day</option>
          <option value="7">Day 7 - Disney with Steph</option>
          <option value="8">Day 8 - Steph's House</option>
          <option value="9">Day 9 - Disneyland</option>
          <option value="10">Day 10 - Disney ‚Üí Great Wolf / Medieval Times</option>
          <option value="11">Day 11 - Great Wolf / Ducks Game</option>
          <option value="12">Day 12 - Drive to Redding</option>
          <option value="13">Day 13 - Shasta Caverns</option>
          <option value="14">Day 14 - Turtle Bay / Home</option>
        </select>
      </div>
      <button class="btn" id="upload-btn" onclick="openCloudinaryWidget()">üì∑ Choose Photos or Videos</button>
      <p style="color: var(--gray); font-size: 12px; margin-top: 15px; text-align: center;">Select multiple photos - you can add captions to each one after uploading!</p>
    </div>
  </div>

  <!-- Caption Photos Modal (appears after batch upload) -->
  <div class="modal" id="modal-captions">
    <div class="modal-content" style="max-width: 600px; max-height: 90vh;">
      <div class="modal-header">
        <h2>‚úèÔ∏è Add Captions</h2>
        <button class="modal-close" onclick="closeCaptionModal()">&times;</button>
      </div>
      <p style="color: var(--gray); margin-bottom: 20px;">Add a caption to each photo (optional)</p>
      <div id="caption-photos-list" style="max-height: 50vh; overflow-y: auto; margin-bottom: 20px;">
        <!-- Photos will be inserted here -->
      </div>
      <div style="display: flex; gap: 10px;">
        <button class="btn" onclick="saveCaptions()" style="flex: 1;">üíæ Save Captions</button>
        <button class="btn" onclick="closeCaptionModal()" style="flex: 1; background: linear-gradient(135deg, #666, #888);">Skip</button>
      </div>
    </div>
  </div>

  <!-- Edit Single Photo Modal -->
  <div class="modal" id="modal-edit-photo">
    <div class="modal-content" style="max-width: 450px;">
      <div class="modal-header">
        <h2>‚úèÔ∏è Edit Caption</h2>
        <button class="modal-close" onclick="closeModal('edit-photo')">&times;</button>
      </div>
      <div id="edit-photo-preview" style="margin-bottom: 20px; text-align: center;">
        <img id="edit-photo-img" src="" style="max-width: 100%; max-height: 200px; border-radius: 12px;">
      </div>
      <input type="hidden" id="edit-photo-id">
      <div class="form-group">
        <label>Caption</label>
        <input type="text" id="edit-photo-caption" placeholder="Add a caption...">
      </div>
      <button class="btn" onclick="savePhotoEdit()">üíæ Save</button>
    </div>
  </div>

  <!-- Journal Modal -->
  <div class="modal" id="modal-journal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>‚úèÔ∏è Write Entry</h2>
        <button class="modal-close" onclick="closeModal('journal')">&times;</button>
      </div>
      <form id="journal-form">
        <div class="form-group">
          <label>Who's Writing?</label>
          <select id="journal-name">
            <option value="">Select family member...</option>
            <option value="Brandon">Brandon</option>
            <option value="Racheal">Racheal</option>
            <option value="Olivia">Olivia</option>
          </select>
        </div>
        <div class="form-group">
          <label>Which Day?</label>
          <select id="journal-day">
            <option value="">General / No specific day</option>
            <option value="1">Day 1 - Sacramento / Lion King</option>
            <option value="2">Day 2 - Jelly Belly / Sharks Game</option>
            <option value="3">Day 3 - Drive to Disney / Arrive</option>
            <option value="4">Day 4 - Rest / Pool Day</option>
            <option value="5">Day 5 - Disneyland</option>
            <option value="6">Day 6 - Cabana Day</option>
            <option value="7">Day 7 - Disney with Steph</option>
            <option value="8">Day 8 - Steph's House</option>
            <option value="9">Day 9 - Disneyland</option>
            <option value="10">Day 10 - Disney ‚Üí Great Wolf / Medieval Times</option>
            <option value="11">Day 11 - Great Wolf / Ducks Game</option>
            <option value="12">Day 12 - Drive to Redding</option>
            <option value="13">Day 13 - Shasta Caverns</option>
            <option value="14">Day 14 - Turtle Bay / Home</option>
          </select>
        </div>
        <div class="form-group">
          <label>Your Thoughts</label>
          <textarea id="journal-content" placeholder="What's on your mind? How are you feeling? What was your favorite part?"></textarea>
        </div>
        <button type="submit" class="btn">Post Entry</button>
      </form>
    </div>
  </div>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox">
    <button class="lightbox-close" onclick="closeLightbox()">&times;</button>
    <img id="lightbox-img" src="">
    <div class="lightbox-caption" id="lightbox-caption"></div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast"></div>

  <script>
    // API Configuration - Cloudflare Worker
    const API_URL = 'https://donnelly-api.brandondonnelly33.workers.dev';

    // Create stars
    function createStars() {
      const container = document.getElementById('stars');
      for (let i = 0; i < 50; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        star.style.left = Math.random() * 100 + '%';
        star.style.top = Math.random() * 100 + '%';
        star.style.animationDelay = Math.random() * 3 + 's';
        container.appendChild(star);
      }
    }
    createStars();

    // Countdown
    function updateCountdown() {
      const tripStart = new Date('2026-01-22T06:00:00');
      const now = new Date();
      const diff = tripStart - now;

      if (diff <= 0) {
        document.querySelector('.countdown').innerHTML = '<div style="font-size: 36px; color: var(--gold); font-weight: 900;">THE ADVENTURE HAS BEGUN! üéâ</div>';
        document.getElementById('footer-message').textContent = "WE'RE ON OUR ADVENTURE!";
        return;
      }

      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((diff % (1000 * 60)) / 1000);

      document.getElementById('days').textContent = days;
      document.getElementById('hours').textContent = hours;
      document.getElementById('minutes').textContent = minutes;
      document.getElementById('seconds').textContent = seconds;

      document.getElementById('footer-message').textContent = `${days} DAYS UNTIL THE ADVENTURE!`;
    }

    updateCountdown();
    setInterval(updateCountdown, 1000);

    // Modal controls
    function openModal(type) {
      document.getElementById(`modal-${type}`).classList.add('active');
    }

    function closeModal(type) {
      document.getElementById(`modal-${type}`).classList.remove('active');
    }

    // Track uploaded photos for batch captioning
    let pendingUploads = [];

    // Cloudinary Upload Widget
    function openCloudinaryWidget() {
      const uploadedBy = document.getElementById('upload-name').value || 'Anonymous';
      const dayNumber = document.getElementById('upload-day').value || '0';

      // Reset pending uploads
      pendingUploads = [];

      const widget = cloudinary.createUploadWidget({
        cloudName: 'dpazcxxyp',
        uploadPreset: 'donnelly_unsigned',
        sources: ['local', 'camera'],
        multiple: true,
        maxFiles: 20,
        resourceType: 'auto',
        tags: ['california2026'],
        context: {
          uploaded_by: uploadedBy,
          day_number: dayNumber
        },
        styles: {
          palette: {
            window: '#0d2818',
            windowBorder: '#efbf04',
            tabIcon: '#efbf04',
            menuIcons: '#adebb3',
            textDark: '#0d2818',
            textLight: '#e0e0e0',
            link: '#efbf04',
            action: '#efbf04',
            inactiveTabIcon: '#888',
            error: '#ff4444',
            inProgress: '#efbf04',
            complete: '#adebb3',
            sourceBg: '#1a3d2a'
          }
        }
      }, (error, result) => {
        if (!error && result && result.event === 'success') {
          // Track each successful upload
          pendingUploads.push({
            public_id: result.info.public_id,
            url: result.info.secure_url,
            uploaded_by: uploadedBy,
            day_number: dayNumber
          });
        }
        if (result && result.event === 'close') {
          closeModal('upload');
          // If we have uploads, show the caption modal
          if (pendingUploads.length > 0) {
            showCaptionModal();
          }
        }
      });

      widget.open();
    }

    // Show caption modal after batch upload
    function showCaptionModal() {
      const container = document.getElementById('caption-photos-list');
      container.innerHTML = pendingUploads.map((photo, index) => `
        <div class="caption-item" data-id="${photo.public_id}">
          <img src="${photo.url}" alt="Uploaded photo">
          <div class="caption-input-wrapper">
            <input type="text"
                   id="caption-input-${index}"
                   placeholder="Add a caption for this photo..."
                   data-public-id="${photo.public_id}"
                   data-uploaded-by="${photo.uploaded_by}"
                   data-day-number="${photo.day_number}">
          </div>
        </div>
      `).join('');

      document.getElementById('modal-captions').classList.add('active');
    }

    // Close caption modal
    function closeCaptionModal() {
      document.getElementById('modal-captions').classList.remove('active');
      pendingUploads = [];
      loadPhotos();
    }

    // Save all captions from batch upload
    async function saveCaptions() {
      const inputs = document.querySelectorAll('#caption-photos-list input');
      let saved = 0;

      for (const input of inputs) {
        const caption = input.value.trim();
        if (caption) {
          const publicId = input.dataset.publicId;
          const uploadedBy = input.dataset.uploadedBy;
          const dayNumber = input.dataset.dayNumber;

          try {
            await fetch(`${API_URL}/api/photos/${encodeURIComponent(publicId)}`, {
              method: 'PUT',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                caption: caption,
                uploaded_by: uploadedBy,
                day_number: dayNumber
              })
            });
            saved++;
          } catch (err) {
            console.error('Failed to save caption:', err);
          }
        }
      }

      showToast(`${saved > 0 ? saved + ' caption' + (saved > 1 ? 's' : '') + ' saved!' : 'Photos uploaded!'} üì∏`);
      closeCaptionModal();
    }

    // Edit single photo caption
    function openEditPhoto(publicId, url, caption) {
      document.getElementById('edit-photo-id').value = publicId;
      document.getElementById('edit-photo-img').src = url;
      document.getElementById('edit-photo-caption').value = caption || '';
      document.getElementById('modal-edit-photo').classList.add('active');
    }

    // Save single photo edit
    async function savePhotoEdit() {
      const publicId = document.getElementById('edit-photo-id').value;
      const caption = document.getElementById('edit-photo-caption').value.trim();

      try {
        const res = await fetch(`${API_URL}/api/photos/${encodeURIComponent(publicId)}`, {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ caption: caption })
        });

        if (res.ok) {
          showToast('Caption updated! ‚úèÔ∏è');
          closeModal('edit-photo');
          loadPhotos();
        } else {
          showToast('Failed to update');
        }
      } catch (err) {
        showToast('Failed to update');
      }
    }

    // Delete photo
    async function deletePhoto(publicId) {
      if (!confirm('Delete this photo?')) return;

      try {
        const res = await fetch(`${API_URL}/api/photos/${encodeURIComponent(publicId)}`, {
          method: 'DELETE'
        });

        if (res.ok) {
          showToast('Photo deleted');
          loadPhotos();
        } else {
          showToast('Failed to delete');
        }
      } catch (err) {
        showToast('Failed to delete');
      }
    }

    // Journal form
    document.getElementById('journal-form').addEventListener('submit', async function(e) {
      e.preventDefault();

      const content = document.getElementById('journal-content').value.trim();
      if (!content) {
        showToast('Please write something');
        return;
      }

      try {
        const res = await fetch(`${API_URL}/api/journal`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            author: document.getElementById('journal-name').value || 'Anonymous',
            content: content,
            day_number: document.getElementById('journal-day').value || null
          })
        });

        if (res.ok) {
          showToast('Entry posted! ‚úèÔ∏è');
          closeModal('journal');
          document.getElementById('journal-form').reset();
          loadJournal();
        }
      } catch (err) {
        showToast('Failed to post');
      }
    });

    // Load photos from Cloudinary
    async function loadPhotos() {
      const container = document.getElementById('gallery-container');

      try {
        const res = await fetch(`${API_URL}/api/photos`);
        const photos = await res.json();

        if (photos.length === 0) {
          container.innerHTML = `
            <div class="empty-state" style="grid-column: 1/-1;">
              <div class="icon">üì∑</div>
              <p>No photos yet - be the first to add a memory!</p>
            </div>
          `;
          return;
        }

        container.innerHTML = photos.map(photo => {
          const safeCaption = (photo.caption || '').replace(/'/g, "\\'").replace(/"/g, '&quot;');
          return `
          <div class="gallery-item" data-id="${photo.public_id}">
            <div class="photo-wrapper" onclick="openLightbox('${photo.url}', '${safeCaption}')">
              <img src="${photo.url}" alt="${photo.caption || ''}">
            </div>
            <div class="photo-info">
              ${photo.caption ? `<div class="photo-caption">${photo.caption}</div>` : '<div class="photo-caption" style="color: var(--gray); font-style: italic;">No caption</div>'}
              <div class="photo-meta">
                <span class="photo-author">${photo.uploaded_by || 'Anonymous'}${photo.day_number && photo.day_number !== '0' ? ` ‚Ä¢ Day ${photo.day_number}` : ''}</span>
                <div class="photo-actions">
                  <button class="edit-btn" onclick="event.stopPropagation(); openEditPhoto('${photo.public_id}', '${photo.url}', '${safeCaption}')">Edit</button>
                  <button class="delete-btn" onclick="event.stopPropagation(); deletePhoto('${photo.public_id}')">Delete</button>
                </div>
              </div>
            </div>
          </div>
        `}).join('');
      } catch (err) {
        container.innerHTML = '<div class="empty-state" style="grid-column: 1/-1;"><div class="icon">üì∑</div><p>Upload photos during the trip!</p></div>';
      }
    }

    // Load journal from Cloudflare KV
    async function loadJournal() {
      const container = document.getElementById('journal-entries');

      try {
        const res = await fetch(`${API_URL}/api/journal`);
        const entries = await res.json();

        if (entries.length === 0) {
          container.innerHTML = `
            <div class="empty-state">
              <div class="icon">üìù</div>
              <p>No entries yet - write the first family memory!</p>
            </div>
          `;
          return;
        }

        container.innerHTML = entries.map(entry => {
          const date = new Date(entry.created_at).toLocaleDateString('en-US', {
            month: 'short', day: 'numeric', hour: 'numeric', minute: '2-digit'
          });
          return `
            <div class="journal-entry">
              <span class="author">${entry.author}</span>
              <span class="date">${date}</span>
              ${entry.day_number ? `<span class="date">‚Ä¢ Day ${entry.day_number}</span>` : ''}
              <div class="content">${entry.content}</div>
            </div>
          `;
        }).join('');
      } catch (err) {
        container.innerHTML = '<div class="empty-state"><div class="icon">üìù</div><p>Write memories during the trip!</p></div>';
      }
    }

    // Lightbox
    function openLightbox(url, caption) {
      document.getElementById('lightbox-img').src = url;
      document.getElementById('lightbox-caption').textContent = caption;
      document.getElementById('lightbox').classList.add('active');
    }

    function closeLightbox() {
      document.getElementById('lightbox').classList.remove('active');
    }

    // Toast
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 3000);
    }

    // Save selected family member to localStorage
    const savedName = localStorage.getItem('donnellyName') || '';
    if (savedName) {
      document.getElementById('upload-name').value = savedName;
      document.getElementById('journal-name').value = savedName;
    }

    document.getElementById('upload-name').addEventListener('change', function() {
      localStorage.setItem('donnellyName', this.value);
      document.getElementById('journal-name').value = this.value;
    });

    document.getElementById('journal-name').addEventListener('change', function() {
      localStorage.setItem('donnellyName', this.value);
      document.getElementById('upload-name').value = this.value;
    });

    // Initial load
    loadPhotos();
    loadJournal();

    // Close modals on escape
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeModal('upload');
        closeModal('journal');
        closeLightbox();
      }
    });
  </script>

</body>
</html>
